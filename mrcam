#!/usr/bin/python3


r'''mrcam camera preview tool

SYNOPSIS

  $ mrcam

  [ A window pops up showing a live view of the first available camera ]

This tool provides the most basic camera tools: a live image view and/or a log
replay with feature controls.

'''


import sys
import argparse
import re
import os
import mrcam_argparse

def parse_args():

    parser = \
        argparse.ArgumentParser(description = __doc__,
                                formatter_class=argparse.RawDescriptionHelpFormatter)

    mrcam_argparse.add_common_cmd_options(parser)
    args = parser.parse_args()
    mrcam_argparse.parse_args_postprocess(args)
    return args


args = parse_args()


import mrcam_fltk as mrcam
from fltk import *

fltk_application = \
    mrcam.Fl_mrcam_application(args.camera_params_noname_nodims,
                               args.camera,
                               dims              = args.dims,
                               utcoffset_hours   = args.utcoffset_hours,
                               flip_x_allcams    = args.flip_x_allcams,
                               flip_y_allcams    = args.flip_y_allcams,
                               unlock_panzoom    = args.unlock_panzoom,
                               features          = args.features,
                               period            = args.period,

                               # logging stuff
                               logdir_write      = args.logdir,
                               logdir_read       = args.replay,
                               replay_from_frame = args.replay_from_frame,
                               jpg               = args.jpg,
                               image_path_prefix = args.image_path_prefix,
                               image_directory   = args.image_directory)

Fl.run()
